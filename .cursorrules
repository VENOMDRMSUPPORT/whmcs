# Project Conventions

## Language

- **Project files**: No Arabic text in any project file. All code, comments, strings, and documentation must be in English.
- **Chat**: Arabic replies in conversation are allowed.

## Commits

- **Commit messages must be in English only.** No Arabic in commit messages.

## Edit Over Add

- **Prefer editing existing files** over adding many new files.
- Avoid creating unnecessary files or chaotic project structure.
- When possible, extend or refactor existing code instead of duplicating or adding new modules.

---

## STRICT: Template Scope

**All user-requested UI, layout, or frontend changes MUST be implemented in the `venom-solutions` template only.**

- Never modify `twenty-one`, `nexus`, or other built-in templates for user-facing changes.
- Target path: `templates/venom-solutions/` (and its subfolders: `css/`, `js/`, `includes/`).
- If a template file does not exist in venom-solutions, copy the base from twenty-one and customize it thereâ€”do not edit twenty-one directly.

---

## STRICT: Page Context Separation

The theme uses **different header and footer** depending on page context. Always respect this separation.

### Landing & Auth Context
- **Pages**: Homepage (`index`), Login (`login`), Register (`register`), Password Reset (`pwreset`, `pwresetvalidation`)
- **Body class**: `landing`
- **Header**: `venom-header` (no `venom-header-client`)
- **Footer**: `venom-footer` (marketing-style footer with links, brand, contact)
- **Logic**: `$useClientHeader` and `$useClientFooter` are `false`

### Client Area Context
- **Pages**: All pages shown when user is logged in (dashboard, services, invoices, tickets, account, etc.)
- **Body class**: `client-area`
- **Header**: `venom-header venom-header-client` (client nav, notifications, cart)
- **Footer**: `venom-client-footer` (compact footer with locale picker, back-to-top)
- **Logic**: `$useClientHeader` and `$useClientFooter` are `true`

### Implementation Rules
- When adding or modifying header/footer content, check which context applies and edit the correct block in `header.tpl` or `footer.tpl`.
- Do not mix landing-style elements (hero, marketing links) into client area header/footer.
- Do not mix client-area elements (notifications, cart, locale picker) into landing header/footer.
---

---

## MANDATORY: UI & Browser Testing (WSL Native)

Testing MUST be done using the local `agent-browser` tool with the `--headed` flag to ensure synchronization with the user's WSLg environment.

### 1. The ONLY Authorized Browser Tool
- **Command**: `agent-browser --headed open <URL>`
- **Reason**: Cloud-based browser tools (CDP 9222) are blocked/isolated from WSL. This tool bridges the gap.
- **NEVER**: Propose, use, or mention tunnels (cloudflared, ngrok) or external browser subagents.

### 2. Operational Protocol
- **Navigation**: `agent-browser --headed open http://venom-drm.test/<path>`
- **Interaction**: Use `agent-browser fill`, `agent-browser click`, `agent-browser wait`.
- **Verification**: Use `agent-browser screenshot` followed by `view_file` to analyze the UI.
- **Workflow**: All UI audit steps must happen sequentially through terminal commands.

### 3. Client Area Login Automation
To test the Client Area, use the following logic and credentials:
- **Login URL**: `http://venom-drm.test/login.php`
- **User**: `client@venom-drm.test`
- **Pass**: `client@123`
- **Login Command Example**:
  ```bash
  agent-browser --headed open http://venom-drm.test/login.php && \
  agent-browser fill "#username" "client@venom-drm.test" && \
  agent-browser fill "#password" "client@123" && \
  agent-browser click ".auth-submit" && \
  agent-browser wait --load networkidle
  ```
- **Note**: Always check if the login was successful before proceeding to dashboard tests.
