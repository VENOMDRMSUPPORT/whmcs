import{b as U,c as k,a as I,_ as W}from"./BasePage-C3DiNX0e.js";import{_ as D,b as z,S as q,u as Y,a as H,O as J}from"./index-_-ijfL1Q.js";import{_ as R}from"./UInput.vue_vue_type_script_setup_true_lang-eIU5RwOc.js";import{_ as K}from"./UToggle.vue_vue_type_script_setup_true_lang-BWEOakO2.js";import{_ as B}from"./UAlert.vue_vue_type_script_setup_true_lang-BbXl4P3t.js";import{_ as Q}from"./UModal.vue_vue_type_script_setup_true_lang-UujHcnfK.js";import{m as X,j as Z,h as p,o as u,w as n,a as o,x,A as V,r as _,l as ee,k as h,M as C,ah as S,f as le,c as ae,u as $,F as oe,b as te}from"./index-DRopsKkO.js";import{w as ne}from"./wrench-BOnrtR8c.js";import"./useMutationObserver-DtW-3lQD.js";import"./ULabel.vue_vue_type_script_setup_true_lang-B9XE8rwf.js";import"./UDivider.vue_vue_type_script_setup_true_lang-CGxguuHo.js";const se=""+new URL("cpanel-4a_hkhUf.svg",import.meta.url).href,re=""+new URL("directadmin-BxFOqSAs.svg",import.meta.url).href,ie=""+new URL("plesk-CWmglDV2.svg",import.meta.url).href,me={__name:"ConnectionModal",props:X({data:{type:Object,default:()=>{}}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const i=Z(s,"modelValue");return(a,d)=>{const m=R,v=D,c=k,f=U,e=Q;return u(),p(e,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=g=>i.value=g),title:a.$t("title.serverDetails"),description:a.$t("description.serverDetails"),size:"xs","click-to-close":"","esc-to-close":"","close-button":!1},{default:n(()=>[o(f,{gap:"xl"},{default:n(()=>[o(m,{"model-value":s.data.serverName,"label-align":"topWithDesc",label:a.$t("label.serverName"),description:a.$t("description.serverName"),readonly:""},null,8,["model-value","label","description"]),o(m,{"model-value":s.data.primaryIp,"label-align":"topWithDesc",label:a.$t("label.primaryIp"),description:a.$t("description.primaryIp"),readonly:""},null,8,["model-value","label","description"]),o(m,{"model-value":s.data.primaryNameserver,"label-align":"topWithDesc",label:a.$t("label.primaryNameserver"),readonly:""},null,8,["model-value","label"]),o(m,{"model-value":s.data.secondaryNameserver,"label-align":"topWithDesc",label:a.$t("label.secondaryNameserver"),readonly:""},null,8,["model-value","label"]),o(c,{justify:"center"},{default:n(()=>[o(v,{label:a.$t("global.close"),underlined:"",onClick:d[0]||(d[0]=g=>i.value=!i.value)},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue","title","description"])}}},de={__name:"ConnectionAlert",props:{verified:{type:Boolean,required:!1}},setup(s){return(i,a)=>{const d=z,m=I,v=k,c=U,f=B;return u(),p(f,{class:"py-5",color:s.verified?"green":"red",variant:"thirdary"},{default:n(()=>[o(c,{gap:"sm",align:"center"},{default:n(()=>[o(c,{gap:"xs",align:"center"},{default:n(()=>[o(v,{gap:"xs","no-mobile":"",class:"justify-center"},{default:n(()=>[o(d,{name:s.verified?"check-circle-fill":"exclamation-circle-fill",color:s.verified?"green":"red"},null,8,["name","color"]),o(m,{size:"lg",class:"font-semibold text-gray-900",html:s.verified?i.$t("title.connectionVerified"):i.$t("error.connection")},null,8,["html"])]),_:1}),s.verified?V("",!0):(u(),p(m,{key:0,class:"text-gray-900",html:i.$t("description.connectionError")},null,8,["html"]))]),_:1}),x(i.$slots,"default")]),_:3})]),_:3},8,["color"])}}},ue=["src","alt"],we={__name:"Page",setup(s){const i=Object.values(q).map(l=>({value:l,label:l,image:new URL(Object.assign({"./assets/images/cpanel.svg":se,"./assets/images/directadmin.svg":re,"./assets/images/plesk.svg":ie})[`./assets/images/${l}.svg`],import.meta.url).href})),a=Y(),d=_(!1),m=_(!1),v=_(!1),c=_(!1),f=_({}),e=ee({module:null,serverId:null,hostname:"",username:"",password:""}),g=h(()=>!!(e.module&&e.hostname&&e.username)),y=h(()=>a.server.isConnectionVerified),M=h(()=>b.value?!1:!g.value||!y.value||!c.value),b=h(()=>a.server.servers.cpanel.hostname||a.server.servers.plesk.hostname||a.server.servers.directadmin.hostname);C(()=>e.module,()=>{const l=a.server.servers[e.module];l&&(e.serverId=l.serverId,e.hostname=l.hostname,e.username=l.username,e.password=l.password,v.value=!1,a.server.isConnectionVerified=!!l.password)}),C(e,()=>{c.value=S(f.value)===S(e)}),le(async()=>{!!a.server.servers.cpanel.serverId||await a.getServers();const t=a.server.servers[e.module];t&&(e.serverId=t.serverId,e.hostname=t.hostname,e.username=t.username,e.password=t.password)});function N(){d.value=!0}async function E(){if(g.value){m.value=!0;try{await a.verifyServer(e),a.server.isConnectionVerified=!0,f.value={...e},c.value=!0}catch{a.server.isConnectionVerified=!1}finally{v.value=!0,m.value=!1}}}async function O(l){try{b.value||await a.createServer(e),l()}catch{a.server.isConnectionVerified=!1}}return(l,t)=>{const A=I,F=B,L=K,w=R,j=H,G=k,P=D,T=U;return u(),p(W,{group:l.$t("group.hosting"),"group-step":$(J)*6,title:l.$t("title.hosting"),description:l.$t("description.controlPanel"),"prevent-next":M.value,prev:{name:"GettingStarted/Domains/Step7"},next:{name:"GettingStarted/MarketConnect/Step1"},skip:b.value?null:{name:"GettingStarted/MarketConnect/Step1"},onContinue:O},{default:n(()=>[b.value?(u(),p(F,{key:0,color:"green"},{description:n(()=>[o(A,{align:"center",html:l.$t("description.firstServerConnected",{wrenchIcon:$(ne)})},null,8,["html"])]),_:1})):(u(),ae(oe,{key:1},[o(L,{modelValue:e.module,"onUpdate:modelValue":t[0]||(t[0]=r=>e.module=r),name:"toggle",size:"xl",options:$(i),split:"",block:""},{option:n(({option:r})=>[te("img",{src:r.image,alt:r.value,class:"py-1"},null,8,ue)]),_:1},8,["modelValue","options"]),e.module?(u(),p(T,{key:0},{default:n(()=>[o(w,{modelValue:e.hostname,"onUpdate:modelValue":t[1]||(t[1]=r=>e.hostname=r),label:l.$t("label.hostnameIp"),placeholder:l.$t("placeholder.hostnameIp")},null,8,["modelValue","label","placeholder"]),o(w,{modelValue:e.username,"onUpdate:modelValue":t[2]||(t[2]=r=>e.username=r),label:l.$t("label.username"),placeholder:l.$t("placeholder.hostingUsername")},null,8,["modelValue","label","placeholder"]),o(G,{align:"end","no-mobile":""},{default:n(()=>[o(w,{modelValue:e.password,"onUpdate:modelValue":t[3]||(t[3]=r=>e.password=r),label:l.$t("label.password"),placeholder:l.$t("placeholder.password"),type:"password"},null,8,["modelValue","label","placeholder"]),o(j,{label:l.$t("label.testConnection"),disabled:!g.value,loading:m.value,size:"sm",class:"relative leading-snug min-w-[8.625rem]",onClick:E},null,8,["label","disabled","loading"])]),_:1}),v.value?(u(),p(de,{key:0,verified:y.value},{default:n(()=>[y.value?(u(),p(P,{key:0,underlined:"",color:"grayscale",class:"mb-1.5",label:l.$t("label.viewDetails"),onClick:N},null,8,["label"])):V("",!0),o(me,{modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=r=>d.value=r),data:$(a).server.details},null,8,["modelValue","data"])]),_:1},8,["verified"])):V("",!0)]),_:1})):V("",!0)],64))]),_:1},8,["group","group-step","title","description","prevent-next","skip"])}}};export{we as default};
