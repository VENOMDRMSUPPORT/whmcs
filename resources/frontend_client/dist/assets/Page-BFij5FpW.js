import{c as Y,_ as Se,g as ze,q as Be,p as M,b as j,r as Pe,s as Ce,t as ue,f as Fe,e as O,u as De,v as ke}from"./UText.vue_vue_type_script_setup_true_lang-DjPteYva.js";import{d as P,e as A,F as L,j as t,w as b,n as ee,u as a,o as d,l as k,r as J,a1 as de,c as C,a2 as F,p as x,s as K,k as I,m as me,a as te,I as X,b as pe,f as B,h as D,g as fe,a3 as H,J as le,a4 as Le,D as Z,Q as Ue,S as ae,a5 as W,x as se,y as re,P as ve,a6 as we,v as Re,z as Ne,a7 as Me,a8 as je,W as qe}from"./index-B6GODExW.js";import{_ as $e,a as ne,b as Te,c as Ee,u as Q,d as G,e as xe,f as Oe,g as He,h as We,i as Ge,j as Ke,k as Je}from"./CartTotals.vue_vue_type_script_setup_true_lang-uPXkudZC.js";const ie=P({__name:"CartHeader",setup(o){return(e,i)=>{const s=ee,n=Se,c=Y,g=$e,l=M;return d(),A(L,null,[t(c,{gap:"2xs"},{default:b(()=>[t(s,{name:"chevron-left",size:"3xs",color:"neutral"}),t(n,{label:e.$t("cartbrowse"),href:a(ze)(a(Be)),color:"neutral",size:"sm"},null,8,["label","href"])]),_:1}),t(c,{align:"baseline",justify:"between",block:""},{default:b(()=>[t(g,{label:e.$t("carttitle")},null,8,["label"]),t(c,{align:"center",gap:"xs"},{default:b(()=>[t(l,{label:e.$t("carttitle"),weight:"bold",size:"sm"},null,8,["label"]),t(s,{name:"chevron-right",size:"2xs"}),t(l,{label:e.$t("orderForm.checkout"),size:"sm"},null,8,["label"])]),_:1})]),_:1})],64)}}}),Qe=P({__name:"SummaryGroupCard",props:{item:{}},setup(o){const e={wrapper:"!p-5",header:"mb-0",description:"mt-0",title:"text-large font-semibold",titleFallback:"gap-1"};return(i,s)=>{const n=M,c=Y,g=j,l=ne;return d(),k(l,{title:o.item.title,config:e},{actions:b(()=>[t(n,{value:o.item.price,size:"lg"},null,8,["value"])]),default:b(()=>[t(g,{align:"start",gap:"none",class:"mt-1"},{default:b(()=>[(d(!0),A(L,null,J(o.item.cycles,({value:u,cycle:r},p)=>(d(),k(c,{key:p,align:"center",justify:"between",block:""},{default:b(()=>[t(n,{label:i.$t("cycleRenewal",{cycle:r}),variant:"lifted",size:"sm",weight:"medium"},null,8,["label"]),t(n,{label:u,variant:"lifted",size:"sm",weight:"medium"},null,8,["label"])]),_:2},1024))),128))]),_:1})]),_:1},8,["title"])}}}),Xe=P({__name:"CartSummary",props:{items:{},itemsCount:{}},setup(o){const{t:e}=de(),i=o,s=C(()=>`${i.itemsCount} ${i.itemsCount===1?e("item"):e("items")}`),n=C(()=>{if(!i.items.length)return[];const l=new Map;return i.items.forEach(u=>{const r=u.type,p=l.get(r),f=parseFloat(u.billing?.price?.recurring?.amount.value||u.billing?.price?.onetime?.amount.value||"0");p?(p.count+=1,p.price+=f,p.items.push(u)):l.set(r,{type:r,count:1,price:f,items:[u]})}),Array.from(l.values()).map(u=>{const r=u.items.reduce((f,h)=>{const v=h.billing?.cycle;if(!v)return f;const _=parseFloat(h.billing.price?.recurring?.amount.value||h.billing.price?.onetime?.amount.value||"0"),m=h.billing.price?.recurring?.amount.prefix||h.billing.price?.onetime?.amount.prefix||"",T=h.billing.price?.recurring?.amount.suffix||h.billing.price?.onetime?.amount.suffix||"",$=f.get(v)||{total:0,prefix:"",suffix:""};return f.set(v,{total:$.total+_,prefix:$.prefix||m,suffix:$.suffix||T}),f},new Map),p=Array.from(r.entries()).map(([f,{total:h,prefix:v,suffix:_}])=>({value:`${v}${h.toFixed(2)}${_}`,cycle:Pe(f)}));return{title:`${u.count} ${c(u.type,u.count)}`,description:g(u.type),price:u.price,cycles:p}})});function c(l,u){const p={[F.Product]:{singular:e("cartItemType.product"),plural:e("cartItemType.products")},[F.DomainRegister]:{singular:e("cartItemType.domain"),plural:e("cartItemType.domains")},[F.DomainTransfer]:{singular:e("cartItemType.domainTransfer"),plural:e("cartItemType.domainTransfers")},[F.DomainRenewal]:{singular:e("cartItemType.domainRenewal"),plural:e("cartItemType.domainRenewals")},[F.Addon]:{singular:e("cartItemType.addon"),plural:e("cartItemType.addons")},[F.Bundle]:{singular:e("cartItemType.bundle"),plural:e("cartItemType.bundles")}}[l]||{singular:e("item"),plural:e("items")};return u===1?p.singular:p.plural}function g(l){return{[F.Product]:e("cartItemType.product"),[F.DomainRegister]:e("cartItemType.domainRegistration"),[F.DomainTransfer]:e("cartItemType.domainTransfer"),[F.DomainRenewal]:e("cartItemType.domainRenewal"),[F.Addon]:e("cartItemType.addon"),[F.Bundle]:e("cartItemType.bundle")}[l]||e("item")}return(l,u)=>{const r=$e,p=M,f=j,h=Ce;return d(),A(L,null,[t(f,{gap:"sm"},{default:b(()=>[t(r,{label:l.$t("ordersummary")},null,8,["label"]),t(p,{label:s.value,size:"lg"},null,8,["label"])]),_:1}),t(h),t(f,{block:"",gap:"sm"},{default:b(()=>[(d(!0),A(L,null,J(n.value,(v,_)=>(d(),k(Qe,{key:_,item:v},null,8,["item"]))),128))]),_:1})],64)}}}),Ye=P({__name:"DomainSelectionModal",props:{modelValue:{type:Boolean},domains:{}},emits:["update:modelValue","confirm"],setup(o,{emit:e}){const i=o,s=e,n=x(i.modelValue),c=x("");K(()=>i.modelValue,l=>{n.value=l,l&&i.domains.length>0&&(c.value=i.domains[0].itemId)}),K(n,l=>{s("update:modelValue",l)});function g(){c.value&&s("confirm",c.value),n.value=!1}return(l,u)=>{const r=M,p=Ee,f=j,h=Te;return d(),k(h,{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=v=>n.value=v),title:l.$t("cartproductdomainchoose"),"confirm-label":l.$t("continue"),"cancel-label":l.$t("cancel"),onConfirm:g},{default:b(()=>[t(f,{block:"",gap:"xs"},{default:b(()=>[t(r,{label:l.$t("cartproductdomainuseincart")},null,8,["label"]),(d(!0),A(L,null,J(o.domains,(v,_)=>(d(),k(p,{key:_,modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=m=>c.value=m),value:v.itemId,label:v.name||""},null,8,["modelValue","value","label"]))),128))]),_:1})]),_:1},8,["modelValue","title","confirm-label","cancel-label"])}}}),Ze=P({__name:"LastChanceHostingCard",props:{id:{},title:{},pricing:{},added:{type:Boolean}},setup(o){const e=o,i=Q(),s=x(!1),n=C(()=>e.pricing.recurring?.[0]),c=C(()=>e.pricing.isFree),g=C(()=>!e.pricing.isFree&&n.value?n.value.amount.displayValue:""),l=C(()=>n.value?ue(n.value.cycle):""),u=C(()=>i.domainCartItems);async function r(){const v=u.value;e.added||!v.length||(v.length===1?await h(v[0].name):s.value=!0)}async function p(v){const _=u.value.find(m=>m.itemId===v);_&&await h(_.name)}const{isLoading:f,triggerFn:h}=G({watchedFn:async v=>{!v||!n.value||await i.addCartItems([{type:F.Product,productId:e.id,billingCycle:n.value.cycle,domain:v}])}});return(v,_)=>{const m=M,T=j,$=Y,S=ee,R=Fe,y=ne;return d(),A(L,null,[t(y,{class:"py-3 px-4"},{default:b(()=>[t($,{block:"",justify:"between"},{default:b(()=>[t(T,{gap:"none",class:"mt-1"},{default:b(()=>[t(m,{label:o.title,size:"lg",weight:"semibold"},null,8,["label"]),c.value?(d(),k(m,{key:0,variant:"muted",label:v.$t("orderpaymenttermfree"),size:"sm"},null,8,["label"])):(d(),A(L,{key:1},[t(m,{label:g.value},null,8,["label"]),t(m,{label:l.value,size:"sm",variant:"muted",weight:"medium"},null,8,["label"])],64))]),_:1}),t(xe,{added:o.added,loading:a(f),onClick:r},null,8,["added","loading"])]),_:1}),I("",!0)]),_:1}),t(Ye,{modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=w=>s.value=w),domains:u.value,onConfirm:p},null,8,["modelValue","domains"])],64)}}}),et=P({__name:"DomainMultiSelectionModal",props:{modelValue:{type:Boolean},domains:{},addonId:{},addonName:{},addonPrice:{},addonPeriod:{},isAddonFree:{type:Boolean}},emits:["update:modelValue","confirm"],setup(o,{emit:e}){const i=o,s=e,n=x(i.modelValue),c=x([]),g=x([]);K(()=>i.modelValue,r=>{n.value=r,r&&i.domains.length>0&&(c.value=i.domains.filter(p=>p.addons?.some(f=>f.addon.id===i.addonId)).map(p=>p.itemId),g.value=[...c.value])}),K(n,r=>{s("update:modelValue",r)});function l(r){return r.domain||r.name||""}function u(){const r=c.value.filter(p=>!g.value.includes(p));r.length>0&&s("confirm",r),n.value=!1}return(r,p)=>{const f=M,h=j,v=Oe,_=Te;return d(),k(_,{modelValue:n.value,"onUpdate:modelValue":p[1]||(p[1]=m=>n.value=m),title:r.$t("cartproductaddonschoosepackage"),"confirm-label":r.$t("continue"),"cancel-label":r.$t("cancel"),onConfirm:u},{default:b(()=>[t(h,{block:"",gap:"xs"},{default:b(()=>[t(h,{gap:"none",class:"mb-2"},{default:b(()=>[t(f,{label:o.addonName,size:"lg",weight:"semibold"},null,8,["label"]),o.isAddonFree?(d(),k(f,{key:0,variant:"muted",label:r.$t("orderpaymenttermfree"),size:"sm"},null,8,["label"])):(d(),A(L,{key:1},[t(f,{label:o.addonPrice},null,8,["label"]),t(f,{label:o.addonPeriod,size:"sm",variant:"muted",weight:"medium"},null,8,["label"])],64))]),_:1}),t(f,{label:r.$t("cartproductdomainuseincart")},null,8,["label"]),(d(!0),A(L,null,J(o.domains,(m,T)=>(d(),k(v,{key:T,modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=$=>c.value=$),value:m.itemId,label:l(m),description:m.product?.name,disabled:g.value.includes(m.itemId)},null,8,["modelValue","value","label","description","disabled"]))),128))]),_:1})]),_:1},8,["modelValue","title","confirm-label","cancel-label"])}}}),tt=P({__name:"LastChanceMarketConnectCard",props:{addon:{}},setup(o){const e=o,i=Q(),s=x(!1),n=C(()=>e.addon.pricing.recurring?.[0]),c=C(()=>e.addon.pricing.onetime),g=C(()=>e.addon.pricing.isFree),l=C(()=>e.addon.pricing.isFree?"":n.value?n.value.amount.displayValue:c.value?c.value.amount.displayValue:""),u=C(()=>n.value?ue(n.value.cycle):c.value?ue("onetime"):""),r=C(()=>i.cartItems.filter(m=>m.type===F.Product&&m.product?.id&&m.domain)),p=C(()=>r.value.every(m=>m.addons?.some(T=>T.addon.id===e.addon.id)));async function f(){const m=r.value;m.length&&(m.length===1?await _(m[0].itemId):s.value=!0)}async function h(m){await Promise.all(m.map(T=>_(T)))}const{isLoading:v,triggerFn:_}=G({watchedFn:async m=>{await i.addAddonToCartItem(m,[{id:e.addon.id}])}});return(m,T)=>{const $=M,S=j,R=Y,y=ne;return d(),A(L,null,[t(y,{class:"py-3 px-4"},{default:b(()=>[t(R,{block:"",justify:"between"},{default:b(()=>[t(S,{gap:"none",class:"mt-1"},{default:b(()=>[t($,{label:o.addon.name,size:"lg",weight:"semibold"},null,8,["label"]),g.value?(d(),k($,{key:0,variant:"muted",label:m.$t("orderpaymenttermfree"),size:"sm"},null,8,["label"])):(d(),A(L,{key:1},[t($,{label:l.value},null,8,["label"]),t($,{label:u.value,size:"sm",variant:"muted",weight:"medium"},null,8,["label"])],64))]),_:1}),t(xe,{disabled:p.value,added:p.value,loading:a(v),onClick:f},null,8,["disabled","added","loading"])]),_:1})]),_:1}),t(et,{modelValue:s.value,"onUpdate:modelValue":T[0]||(T[0]=w=>s.value=w),domains:r.value,"addon-id":o.addon.id,"addon-name":o.addon.name,"addon-price":l.value,"addon-period":u.value,"is-addon-free":g.value,onConfirm:h},null,8,["modelValue","domains","addon-id","addon-name","addon-price","addon-period","is-addon-free"])],64)}}}),be=P({__name:"CartCheckoutButton",props:{checkoutUrl:{},totalAmount:{},itemsCount:{},loading:{type:Boolean,default:!1}},setup(o){const e=o,{t:i}=de(),s=C(()=>e.itemsCount===0||e.loading),n=C(()=>e.loading?i("processing"):`${i("orderForm.checkout")} - ${e.totalAmount}`);function c(){window.location.href=e.checkoutUrl}return(g,l)=>{const u=O;return d(),k(u,{disabled:s.value,loading:o.loading,label:n.value,"left-icon":"lock",color:"primary",variant:"solid",block:"",class:"sticky bottom-[50px] left-0 w-full z-[1] mb-4 md:mb-0",onClick:c},null,8,["disabled","loading","label"])}}}),at="UTab",ge={tabButton:{base:`
      {UButton} rounded-none border-0 border-b-2 border-transparent
      hover:bg-transparent dark:hover:bg-transparent
      active:bg-transparent dark:active:bg-transparent
    `,variants:{scrollable:{false:"-mb-px"}},defaults:{color:"neutral"}},tabButtonActive:{base:"{>tabButton} border-primary",variants:{disabled:{true:"border-primary/(--vl-disabled-opacity)"}},defaults:{color:"primary"}},defaults:{disabled:!1}},Ie=P({inheritAttrs:!1,__name:"UTab",props:me({label:{},value:{},icon:{},leftIcon:{},rightIcon:{},disabled:{type:Boolean},config:{},dataTest:{}},{...fe(ge,at)}),setup(o,{expose:e}){const i=H("setUTabsSelectedItem"),s=H("getUTabsSelectedItem"),n=H("getUTabsScrollable"),c=H("getUTabsSquare"),g=H("getUTabsBlock"),l=H("getUTabsSize","md"),u=o,r=te("tab"),p=C(()=>r.value?.buttonRef),f=C(()=>X(l)),h=C(()=>X(g)),v=C(()=>X(c)),_=C(()=>X(n)),m=C(()=>X(s)===u.value);async function T(){!u.disabled&&i&&i(u.value??"")}e({button:p});const $=C(()=>({size:f.value,block:h.value,square:v.value,scrollable:_.value,active:m.value})),{getDataTest:S,tabButtonAttrs:R,tabButtonActiveAttrs:y}=pe(ge,$);return(w,U)=>(d(),k(O,B({ref:"tab",variant:"ghost",size:f.value,label:o.label,icon:o.icon,"left-icon":o.leftIcon,"right-icon":o.rightIcon,block:h.value,square:v.value,disabled:o.disabled},m.value?a(y):a(R),{"data-test":a(S)(),onClick:T}),{left:b(({iconName:N})=>[D(w.$slots,"left",{active:m.value,iconName:N})]),default:b(({iconName:N,label:V})=>[D(w.$slots,"label",{label:V,active:m.value,iconName:N})]),right:b(({iconName:N})=>[D(w.$slots,"right",{active:m.value,iconName:N})]),_:3},16,["size","label","icon","left-icon","right-icon","block","square","disabled","data-test"]))}}),lt="UTabs",ye=200,_e={wrapper:"flex gap-1 w-full",tabs:{base:"flex border-b border-default w-full",variants:{scrollable:{true:"overflow-hidden flex-nowrap scroll-smooth"}}},tab:"{UTab}",prev:"",next:"",scrollButton:{base:"{UButton}",defaults:{size:{"2xs":"xs",xs:"xs",sm:"sm",md:"sm",lg:"md",xl:"md"},variant:"ghost",square:!0}},nextButton:"{>scrollButton}",prevButton:"{>scrollButton}",defaults:{size:"md",block:!1,square:!1,scrollable:!1,nextIcon:"chevron_right",prevIcon:"chevron_left"}},nt=["data-test"],ot=P({inheritAttrs:!1,__name:"UTabs",props:me({modelValue:{},options:{},size:{},scrollable:{type:Boolean},block:{type:Boolean},square:{type:Boolean},config:{},dataTest:{}},{...fe(_e,lt),modelValue:"",options:()=>[]}),emits:["update:modelValue"],setup(o,{expose:e,emit:i}){const s=o,n=i,c=C({get:()=>s.modelValue,set:U=>n("update:modelValue",U)}),g=te("wrapper"),l=te("scroll-container"),u=x(!1),r=x(!1);function p(){if(!l.value)return;const{scrollLeft:U,scrollWidth:N,clientWidth:V}=l.value;u.value=U>0,r.value=U<N-V}function f(){l.value&&l.value.scrollBy({left:-ye,behavior:"smooth"})}function h(){l.value&&l.value.scrollBy({left:ye,behavior:"smooth"})}le(()=>{l.value&&(l.value.addEventListener("scroll",p,{passive:!0}),p())}),Le(()=>{l.value&&l.value.removeEventListener("scroll",p)}),W("getUTabsSize",()=>s.size),W("getUTabsBlock",()=>s.block),W("getUTabsSquare",()=>s.square),W("getUTabsScrollable",()=>s.scrollable),W("getUTabsSelectedItem",()=>c.value),W("setUTabsSelectedItem",U=>c.value=U),e({wrapperRef:g});const{getDataTest:v,config:_,wrapperAttrs:m,tabsAttrs:T,tabAttrs:$,prevAttrs:S,nextAttrs:R,nextButtonAttrs:y,prevButtonAttrs:w}=pe(_e);return(U,N)=>(d(),A("div",B({ref:"wrapper"},a(m)),[o.scrollable&&u.value?(d(),A("div",B({key:0},a(S),{onClick:f}),[D(U.$slots,"prev",{iconName:a(_).defaults.prevIcon},()=>[t(O,B({icon:a(_).defaults.prevIcon},a(w)),null,16,["icon"])])],16)):I("",!0),Z("div",B({ref:"scroll-container"},a(T),{"data-test":a(v)(),onScroll:p}),[D(U.$slots,"default",{},()=>[(d(!0),A(L,null,J(o.options,(V,q)=>(d(),k(Ie,B({key:V.value,label:V.label,value:V.value,disabled:V.disabled},{ref_for:!0},a($),{"data-test":a(v)(`item-${q}`)}),{left:b(({iconName:z,active:E})=>[D(U.$slots,"left",{item:V,index:q,active:E,iconName:z})]),label:b(({label:z,iconName:E,active:oe})=>[D(U.$slots,"label",{item:V,index:q,label:z,active:oe,iconName:E},()=>[Ue(ae(z),1)])]),right:b(({iconName:z,active:E})=>[D(U.$slots,"right",{item:V,index:q,active:E,iconName:z})]),_:2},1040,["label","value","disabled","data-test"]))),128))])],16,nt),o.scrollable&&r.value?(d(),A("div",B({key:1},a(R),{onClick:h}),[D(U.$slots,"next",{iconName:a(_).defaults.nextIcon},()=>[t(O,B({icon:a(_).defaults.nextIcon},a(y)),null,16,["icon"])])],16)):I("",!0)],16))}}),he="UAlert",ce={wrapper:{base:"p-4 border-box flex flex-col border border-solid rounded-medium w-full",variants:{variant:{solid:"text-inverted bg-{color} border-transparent",outlined:"text-{color} border-{color}",subtle:"text-{color} bg-{color}/10 border-{color}/15",soft:"text-{color} bg-{color}/10 border-transparent"},size:{xs:"text-tiny",sm:"text-small",md:"text-medium",lg:"text-large"}}},body:"flex items-center justify-between",contentWrapper:"flex gap-2",content:"",title:"font-semibold leading-tight",description:"mt-0.5",text:"{UText}",closeButton:"{UButton}",icon:{base:"{UIcon}",variants:{variant:{solid:"text-inverted"}},defaults:{size:{xs:"3xs",sm:"2xs",md:"xs",lg:"sm"}}},closeIcon:"{>icon}",alertIcon:"{>icon}",i18n:{closeAlert:"Close alert"},defaults:{variant:"subtle",color:"primary",size:"md",timeout:0,closable:!1,closeIcon:"close"}},st=["data-test"],rt=["textContent"],it=["textContent"],ct=P({inheritAttrs:!1,__name:"UAlert",props:me({title:{},description:{},variant:{},size:{},color:{},icon:{},timeout:{},closable:{type:Boolean},config:{},dataTest:{}},{...fe(ce,he)}),emits:["hide"],setup(o,{expose:e,emit:i}){const s=o,n=i,{localeMessages:c}=De(he,ce.i18n,s?.config?.i18n),g=te("wrapper"),l=x(!0);le(()=>{s.timeout>0&&setTimeout(()=>u(),s.timeout)});function u(){l.value=!1,n("hide")}const r=C(()=>s.variant==="solid"?"grayscale":s.color);e({wrapperRef:g});const{getDataTest:p,config:f,wrapperAttrs:h,bodyAttrs:v,contentAttrs:_,textAttrs:m,titleAttrs:T,descriptionAttrs:$,closeButtonAttrs:S,closeIconAttrs:R,alertIconAttrs:y,contentWrapperAttrs:w}=pe(ce);return(U,N)=>l.value?(d(),A("div",B({key:0,ref:"wrapper"},a(h),{"data-test":a(p)()}),[Z("div",se(re(a(v))),[Z("div",se(re(a(w))),[D(U.$slots,"left",{iconName:o.icon},()=>[o.icon?(d(),k(ee,B({key:0,color:"inherit",name:o.icon},a(y)),null,16,["name"])):I("",!0)]),Z("div",se(re(a(_))),[a(ve)(U.$slots.default,{title:o.title})?I("",!0):D(U.$slots,"title",{key:0,title:o.title},()=>[o.title?(d(),A("div",B({key:0},a(T),{textContent:ae(o.title)}),null,16,rt)):I("",!0)]),a(ve)(U.$slots.default,{description:o.description})?I("",!0):D(U.$slots,"description",{key:1,description:o.description},()=>[o.description?(d(),A("div",B({key:0},a($),{textContent:ae(o.description)}),null,16,it)):I("",!0)]),t(M,B({size:o.size},a(m)),{default:b(()=>[D(U.$slots,"default")]),_:3},16,["size"])],16)],16),D(U.$slots,"close",{iconName:a(f).defaults.closeIcon,close:u},()=>[o.closable?(d(),k(O,B({key:0,square:"",size:"xs",color:r.value,variant:"ghost","aria-label":a(c).closeAlert},a(S),{"data-test":a(p)("button"),onClick:u}),{default:b(()=>[t(ee,B({color:r.value,name:a(f).defaults.closeIcon},a(R)),null,16,["color","name"])]),_:1},16,["color","aria-label","data-test"])):I("",!0)])],16)],16,st)):I("",!0)}}),ut=P({__name:"PromoCodeCard",setup(o){const{t:e}=de(),i=Q(),{hasPromotions:s,hasNoDiscount:n}=we(i),c=x(""),g=x(""),l=x(!1);async function u(){const r=c.value.trim();if(!r)return;await i.applyPromotion(r),i.cart?.promotions?.some(f=>f.code?.toLowerCase()===r.toLowerCase())?(g.value=e("codeApplied"),l.value=!0,c.value=""):(g.value=e("invalidCode"),l.value=!1)}return(r,p)=>{const f=ke,h=O,v=ct,_=j;return d(),k(_,{gap:"sm"},{default:b(()=>[t(f,{modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=m=>c.value=m),placeholder:r.$t("orderPromoCodePlaceholder"),size:"lg","left-icon":"ticket-detailed-fill",onKeydown:Re(Ne(u,["prevent"]),["enter"])},null,8,["modelValue","placeholder","onKeydown"]),t(h,{label:r.$t("applyPromoCode"),disabled:!c.value,block:"",onClick:u},null,8,["label","disabled"]),a(s)&&a(n)?(d(),k(v,{key:0,icon:"info-circle",color:"warning",variant:"subtle",title:r.$t("promoappliedbutnodiscount"),class:"mt-4"},null,8,["title"])):g.value?(d(),k(v,{key:1,icon:"check-circle",color:l.value?"success":"error",variant:"subtle",title:g.value,class:"mt-4"},null,8,["color","title"])):I("",!0)]),_:1})}}}),dt=P({__name:"EstimateTaxesCard",setup(o){const e=Q(),i=x([]),s=x([]),n=x(null),c=x(null),g=x(""),l=x(!1),u=x(!1),r=C(()=>e.cart?.totals?.geolocation||null),p=C(()=>r.value?.countryCode||""),f=C(()=>r.value?.state||""),h=C(()=>{if(s.value.length===0)return g.value.trim();if(!c.value)return"";const y=s.value.find(w=>w.code===c.value);return y?y.name:""}),v=C(()=>{if(!n.value||_.value||T.value||S.value||s.value.length>0&&!c.value)return!1;const y=n.value!==(p.value||null),w=h.value!==(f.value||"");return y||w}),{isLoading:_,triggerFn:m}=G({watchedFn:async()=>{i.value=await Me()}}),{isLoading:T,triggerFn:$}=G({watchedFn:async y=>{if(!y){s.value=[],c.value=null;return}if(s.value=await je(y),!l.value&&f.value&&s.value.length>0){const w=s.value.find(U=>U.name===f.value||U.code===f.value);w&&(c.value=w.code)}!l.value&&s.value.length===0&&f.value&&(g.value=f.value)}}),{isLoading:S,triggerFn:R}=G({watchedFn:async()=>{await e.updateGeolocation(n.value,h.value)}});return K(n,async(y,w)=>{y!==w&&(u.value||(l.value&&(c.value=null,g.value=""),await $(y)))}),K(()=>[e.cart,i.value.length],async()=>{l.value||!e.cart||!i.value.length||(u.value=!0,n.value=p.value||null,n.value?await $(n.value):f.value&&(g.value=f.value),l.value=!0,u.value=!1)},{immediate:!0}),le(async()=>{await m()}),(y,w)=>{const U=He,N=ke,V=O,q=j;return d(),k(q,{gap:"sm",block:"",align:"center",justify:"center"},{default:b(()=>[t(U,{modelValue:n.value,"onUpdate:modelValue":w[0]||(w[0]=z=>n.value=z),options:i.value,"label-key":"name","value-key":"code",label:y.$t("country"),placeholder:y.$t("selectCountry"),class:"max-w-100",disabled:a(_)||i.value.length===0,clearable:!1,searchable:""},null,8,["modelValue","options","label","placeholder","disabled"]),s.value.length>0?(d(),k(U,{key:0,modelValue:c.value,"onUpdate:modelValue":w[1]||(w[1]=z=>c.value=z),options:s.value,"label-key":"name","value-key":"code",label:y.$t("state"),placeholder:y.$t("selectState"),class:"max-w-100",disabled:a(T)||s.value.length===0,clearable:!1,searchable:""},null,8,["modelValue","options","label","placeholder","disabled"])):(d(),k(N,{key:1,modelValue:g.value,"onUpdate:modelValue":w[2]||(w[2]=z=>g.value=z),placeholder:y.$t("state"),label:y.$t("state"),class:"max-w-100",disabled:a(_)},null,8,["modelValue","placeholder","label","disabled"])),t(V,{label:y.$t("updateTotals"),class:"mx-auto",disabled:!v.value,loading:a(S),onClick:a(R)},null,8,["label","disabled","loading","onClick"])]),_:1})}}}),mt=P({__name:"PromotionAndTaxCard",setup(o){const e=Q(),i=x("promo"),s=C(()=>{const n=e.cart;return n?n.totals.taxes.length>0:!1});return(n,c)=>{const g=Ie,l=ot,u=ne;return d(),k(u,{variant:"subtle",class:"mt-4"},{default:b(()=>[t(l,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=r=>i.value=r),size:"lg",block:"",class:"mb-4"},{default:b(()=>[t(g,{value:"promo",label:n.$t("orderForm.applyPromoCode")},null,8,["label"]),s.value?(d(),k(g,{key:0,value:"taxes",label:n.$t("estimateTaxes")},null,8,["label"])):I("",!0)]),_:1},8,["modelValue"]),i.value==="promo"?(d(),k(ut,{key:0})):I("",!0),i.value==="taxes"?(d(),k(dt,{key:1})):I("",!0)]),_:1})}}}),pt={key:2,class:"flex flex-col md:flex-row gap-8 items-stretch"},gt=P({__name:"Page",setup(o){const e=Q(),i=x(!0),{cartItems:s,cartItemsCount:n,cartTotalAmount:c,checkoutUrl:g,cartTaxes:l,cartDiscounts:u,cartRecurring:r,cartSubtotal:p,firstThreeAddons:f,firstHostingAccountProductId:h,firstSelectedHostingAccountProductId:v}=we(e),_=C(()=>e.isCartUpdating),{isLoading:m,triggerFn:T}=G({watchedFn:async()=>await e.getCheckoutUrl()});le(async()=>{try{await e.createCart(),await e.getCart(),await e.getProducts(),await e.getProductsAddons(),i.value=!1,await T(),await e.loadCartPricing()}finally{i.value=!1}});const $=C(()=>e.cartItems.some(y=>y.product?.id===S.value?.id)),S=C(()=>{const y=e.getHostingAccountProduct(h.value);if(!(!y||v.value))return{id:y.id,title:y.group.name+" / "+y.name,pricing:y.pricing}}),R=C(()=>{const y=S.value&&!$.value?2:3;return f.value.slice(0,y)});return(y,w)=>{const U=We,N=Ge,V=j,q=qe,z=Y,E=Ce,oe=M;return d(),A(L,null,[t(U,{class:"z-[1000]"}),a(s).length===0&&!i.value?(d(),k(V,{key:0,class:"py-6"},{default:b(()=>[t(ie),t(N,{class:"my-20","placeholder-icon":"bag-dash"},{default:b(()=>[Ue(ae(y.$t("cartempty")),1)]),_:1})]),_:1})):I("",!0),i.value?(d(),k(V,{key:1,class:"py-6"},{default:b(()=>[t(ie),t(z,{justify:"center",class:"!mt-20",align:"center",block:""},{default:b(()=>[t(q,{loading:i.value,color:"primary",size:"lg"},null,8,["loading"])]),_:1})]),_:1})):I("",!0),a(s).length&&!i.value?(d(),A("div",pt,[t(z,{justify:"center",class:"py-6 w-full md:w-3/5 bg-default",block:""},{default:b(()=>[t(V,{gap:"xl",block:""},{default:b(()=>[t(ie),t(Ke,{items:a(s)},null,8,["items"]),t(mt)]),_:1})]),_:1}),t(z,{justify:"center",class:"pt-10 pb-6 px-8 w-full md:w-2/5 bg-muted",block:""},{default:b(()=>[t(V,{gap:"xl",block:""},{default:b(()=>[t(Xe,{items:a(s),"items-count":a(n)},null,8,["items","items-count"]),a(s)?.length&&(S.value&&!$.value||R.value.length)?(d(),k(V,{key:0,gap:"xl",block:""},{default:b(()=>[t(E),t(V,{block:"",gap:"sm"},{default:b(()=>[t(oe,{label:y.$t("lastChance"),size:"lg"},null,8,["label"]),S.value&&!$.value?(d(),k(Ze,{key:0,id:S.value.id,title:S.value.title,pricing:S.value.pricing,added:$.value},null,8,["id","title","pricing","added"])):I("",!0),(d(!0),A(L,null,J(R.value,(Ae,Ve)=>(d(),k(tt,{key:Ve,addon:Ae},null,8,["addon"]))),128))]),_:1})]),_:1})):I("",!0),a(e).cart?(d(),k(Je,{key:1,"cart-recurring":a(r),"cart-subtotal":a(p),"cart-discounts":a(u),"cart-taxes":a(l),"total-amount":a(c)},null,8,["cart-recurring","cart-subtotal","cart-discounts","cart-taxes","total-amount"])):I("",!0),t(be,{class:"hidden md:flex","checkout-url":a(g),"items-count":a(n),"total-amount":a(c).displayValue,loading:_.value||a(m)},null,8,["checkout-url","items-count","total-amount","loading"])]),_:1})]),_:1}),a(s).length&&!i.value?(d(),k(be,{key:0,class:"flex md:hidden","checkout-url":a(g),"items-count":a(n),"total-amount":a(c).displayValue,loading:_.value||a(m)},null,8,["checkout-url","items-count","total-amount","loading"])):I("",!0)])):I("",!0)],64)}}});export{gt as default};
